#!/bin/bash

# To make git run unit tests and lint tests, softlink this file into the
# .git/hooks directory.  The following command will get that done:
#   ln -s ../../prepare-commit-msg .git/hooks/prepare-commit-msg

(
    echo 'Test coverage is as follows:'
    COVERAGE=coverage
    if [ z`which coverage` = z ]
    then
        COVERAGE=python-coverage
    fi
    $COVERAGE report
    echo
    echo 'The Python linter found the following issues:'
    pylint --rcfile=pylintrc --reports=n *.py
    echo
    echo 'The Python formatter recommends the following changes:'
    pyformat -d -s 4 *.py
) | sed -e 's/^/# /' >> $1
